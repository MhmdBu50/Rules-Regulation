@model IEnumerable<dynamic>

<!-- This File is about the admin page that controls what to be added, wheather its a new record or contact. in this page you can edit and delete.
there's also many filtering options to find the policy and other adminstrative stuff-->
@section Styles {
    <link rel="stylesheet" href="~/css/AdminPage.css">
}
<!-- Scripts for the admin page -->
@section Scripts {
    <script src="@Url.Content("~/js/card-animations.js")"></script>
    <script src="@Url.Content("https://cdn.jsdelivr.net/npm/fitty@2.3.6/dist/fitty.min.js")"></script>
    <script src="@Url.Content("js/bootstrap.js")"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/js/StatisticsInAdmin.js"></script>
    <script src="~/js/AdminTable.js"></script>
}

<!-- This is the header section of the admin page -->
<header class="menu">
    <div class="container-fluid h-100 bootstrap-wrapper">
        <div class="row align-items-center h-100 g-0">
            <!-- Left Section - Logo/Hamburger -->
            <div class="col-auto">
                <div class="d-flex align-items-center">

                    <!-- Language Logo -->
                    <img src="~/svgs/navigation/desktop-logo.svg" alt="IAU Logo" class="desktop-logo logo" width="33"
                        height="33" />
                </div>
            </div>

            <!-- Middle Section - Exit Admin view -->
            <div class="col flex-nowrap align-items-center">
                <div class=" d-flex align-items-center  justify-content-center" style="postion: absolute;">
                    <button class="exit-admin-btn " onclick="location.href='@Url.Action("homePage", "Home")'">
                        Exit Admin view
                    </button>
                </div>
            </div>

            <!-- Right Section - Profile -->
            <div class="col-auto flex-nowrap">
                <div class="signlog-container">
                    <!-- PNG version for large screens -->
                    <img class="profile-icon d-none d-xl-block" src="~/imgs/B&W IAU Logo (Horizontal).png"
                        alt="IAU Logo">

                    <!-- SVG version for smaller screens -->
                    <img class="profile-icon d-none d-sm-block d-xl-none" src="~/imgs/B&W IAU Logo.png" alt="IAU Logo">
                </div>
            </div>
        </div>
    </div>


</header>

<!-- Success/Error Messages -->
<div class="container mt-3">
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
</div>

<!--the statistics part of the admin page-->
<div class="dashboard-container">
    <!-- Main Rectangle Container -->
    <div class="dashboard-rectangle">
        <div class="main-row">
            <!-- Left Section - Charts -->
            <div class="charts-section">
                <div class="row g-0 flex-fill">
                    <!-- Donut Chart -->
                    <div class="col-md-6">
                        <div class="chart-section">
                            <div class="chart-title">University Rules and Guidelines Overview</div>
                            <div class="donut-chart-container">
                                <div class="donut-chart-canvas">
                                    <canvas id="chartCanvas"></canvas>
                                </div>
                                <div class="legend-container">
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #8B4513;"></div>
                                        <span class="legend-text">Academic rules</span>
                                        <span class="legend-percentage">40%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #2E8B57;"></div>
                                        <span class="legend-text">Employment rules & regulations</span>
                                        <span class="legend-percentage">30%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #4682B4;"></div>
                                        <span class="legend-text">Student rules & regulations</span>
                                        <span class="legend-percentage">25%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #DAA520;"></div>
                                        <span class="legend-text">Student rules & regulations</span>
                                        <span class="legend-percentage">15%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bar Chart -->
                    <div class="col-md-6">
                        <div class="chart-section">
                            <div class="chart-title">Website visits over the past 6 months</div>
                            <div class="chart-canvas-container">
                                <canvas id="barChartCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vertical Separator to separate buttons from charts -->
            <div class="chart-sidebar-separator"></div>

            <!-- Right Sidebar -->
            <div class="sidebar-section">
                <div class="sidebar-container">
                    <!-- Cards Section -->
                    <div class="sidebar-cards">
                        <!-- Total Policies Card -->
                        <div class="stats-card stats-card-blue">
                            <h6>Total Policies</h6>
                            <div class="number">30</div>
                        </div>

                        <!-- Most Viewed Card -->
                        <div class="stats-card stats-card-green">
                            <h6>Most Viewed</h6>
                            <div class="subtitle">Student Code of Conduct</div>
                            <div class="viewed-text">Viewed: 785 times</div>
                        </div>
                    </div>

                    <!-- Buttons Section -->
                    <div class="sidebar-buttons">
                        <!-- View Report Button -->
                        <button class="btn-custom btn-primary-custom" onclick="viewReport()">
                            View Report
                        </button>

                        <!-- Add New Record Button -->
                        <button class="btn-custom btn-dark-custom"
                            onclick="location.href='@Url.Action("AddNewRecord", "Admin")'">
                            add new record
                        </button>

                        <!-- Export Data Button -->
                        <button class="btn-custom btn-dark-custom" onclick="exportData()">
                            Export Data
                        </button>

                        <!-- Contact Info Button -->
                        <button class="btn-custom btn-dark-custom"
                            onclick="location.href='@Url.Action("AddNewContactInfo", "Admin")'">
                            Add New Contact Info
                        </button>

                        <button class="btn-custom btn-success-custom"
                            onclick="location.href='@Url.Action("ManageContactInfo", "Admin")'">
                            Manage Contact Info
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!--------------------- the table part of the admin page ---------------------->

<!------- Search, Section and Document type Bar ------->
<div class="container my-4">
   <section>
        <div class="container">
            <table class="w-100">
                <thead class="text-center">
                    <tr>
                        <th class="col-5 d-none d-md-table-cell padding-between-search-filter">
                            <div class="col flex-nowrap align-items-center">
                                <div class="search-container d-flex align-items-center position-relative">
                                    <button class="search-and-filter-buttons">
                                        <img src="~/svgs/navigation/search-icon.svg" alt="Search" class="search-icon"
                                            width="44" height="44" />
                                    </button>
                                    <input id="desktopSearchInput" class="search poppins-regular flex-grow-1 small-font-size" type="text"
                                        placeholder="Search by Name/ID..."
                                        style="color: #ABB7C2; background: transparent; border: none; padding-right: 30px;"
                                        oninput="performSearch(this.value); toggleClearButton('desktop')">
                                    <button id="desktopClearBtn" class="position-absolute" 
                                        style="right: 5px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #ABB7C2; font-size: 18px; cursor: pointer; display: none;"
                                        onclick="clearSearchInput('desktop')"
                                        title="Clear search">
                                        ×
                                    </button>
                                </div>
                            </div>
                        </th>

                        <th class="col-3 d-none d-md-table-cell padding-between-search-filter">
                            <div class="col flex-nowrap align-items-center">
                                <div class="search-container d-flex align-items-center" id="section-search">
                                    <select id="adminSectionFilter" class="search poppins-regular flex-grow-1 small-font-size" type="text"
                                        placeholder="Section" style="color: #ABB7C2; border: none;" onchange="filterBySection(this.value)">
                                        <option value="all">All Sections</option>
                                        <option value="students">Students</option>
                                        <option value="members">Members</option>
                                        <option value="enrolled-programs">Enrolled Programs</option>
                                    </select>
                                </div>
                            </div>
                        </th>

                        <th class="col-3 d-none d-md-table-cell padding-between-search-filter">
                            <div class="col flex-nowrap align-items-center">
                                <div class="search-container d-flex align-items-center px-2" id="document-search">
                                    <select id="adminDocumentFilter" class="search poppins-regular flex-grow-1 small-font-size"
                                        style="color: #ABB7C2; border: none;" onchange="filterByDocumentType(this.value)">
                                        <option value="all">All Documents</option>
                                        <option value="regulation">Regulations</option>
                                        <option value="guideline">Guidelines</option>
                                        <option value="guidelines">Guidelines</option>
                                        <option value="policy">Policies</option>
                                    </select>
                                </div>
                            </div>
                        </th>

                        <!-- #region  delete button -->
                        <th class="col d-none d-md-table-cell padding-between-search-filter">
                            <div class="delete-btn-container d-flex align-items-center px-2">
                                <button class="search-and-filter-buttons" onclick="deleteSelectedRecords()">
                                    <img src="~/svgs/admin/Delete-Button.svg" alt="Delete btn" />
                                </button>
                            </div>
                        </th>
                    </tr>
                </thead>
            </table>
        </div>
    </section>

    <!------- Mobile Search and Filter Section ------->
    <section>
        <div class="container">
            <!-- Wrapper with background color -->
            <div class="row gy-3 mb-3 mt-1" style="background-color: #2f3e5f; border-radius: 12px;">
                <!-- Search by Name/ID (Visible only on small screens, hidden on larger screens) -->
                <div class="col-12 d-md-none d-flex align-items-center" style="margin-top: 10px; gap: 10px;">
                    <!-- Search Container (Take remaining space) -->
                    <div class="search-container d-flex align-items-center flex-grow-1 position-relative"
                        style="border: 2px solid whitesmoke; border-radius: 8px;">
                        <button class="search-and-filter-buttons">
                            <img src="~/svgs/navigation/search-icon.svg" alt="Search" class="search-icon" width="44"
                                height="44" />
                        </button>
                        <input id="mobileSearchInput" class="search poppins-regular flex-grow-1" type="text" placeholder="Search by Name/ID..."
                            style="color: #ABB7C2; border: none; background: transparent; padding-right: 30px;"
                            oninput="performSearch(this.value); toggleClearButton('mobile')">
                        <button id="mobileClearBtn" class="position-absolute" 
                            style="right: 5px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #ABB7C2; font-size: 18px; cursor: pointer; display: none;"
                            onclick="clearSearchInput('mobile')"
                            title="Clear search">
                            ×
                        </button>
                    </div>

                    <!-- Delete Button (Fixed width) -->
                    <div class="delete-btn-container d-flex align-items-center justify-content-center flex-grow-1"
                        id="delete-btn-mobile">
                        <button class="search-and-filter-buttons" onclick="deleteSelectedRecords()">
                            <img src="~/svgs/admin/Delete-Button.svg" alt="Delete btn" />
                        </button>
                    </div>
                </div>

                <!-- Section and Document Type Dropdowns (Visible only on small screens, hidden on larger screens) -->
                <div class="col-12 d-md-none d-flex align-items-center" style="gap: 10px;">
                    <!-- Section Dropdown -->
                    <div class="d-flex align-items-center p-0 flex-grow-1" style="margin-bottom: 10px;">
                        <div class="search-container d-flex align-items-center w-100" id="section-document-search-2">
                            <select id="mobileSectionFilter" class="search poppins-regular flex-grow-1" style="color: #ABB7C2;" onchange="filterBySection(this.value)">
                                <option value="all">All Sections</option>
                                <option value="students">Students</option>
                                <option value="members">Members</option>
                                <option value="enrolled-programs">Enrolled Programs</option>
                            </select>
                        </div>
                    </div>

                    <!-- Document Type Dropdown -->
                    <div class="d-flex align-items-center p-0 flex-grow-1" style="margin-bottom: 10px;">
                        <div class="search-container d-flex align-items-center w-100" id="section-document-search-2">
                            <select id="mobileDocumentFilter" class="search poppins-regular flex-grow-1" style="color: #ABB7C2;" onchange="filterByDocumentType(this.value)">
                                <option value="all">All Documents</option>
                                <option value="regulation">Regulations</option>
                                <option value="guidelines">Guidelines</option>
                                <option value="policy">Policies</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!------- base Record ------->
    <div class="container">
        <div class="accordion">
            <div class="accordion-item position-relative">
                <!-- Master Checkbox positioned outside accordion button -->
                <div class="position-absolute field-padding" style="left: 20px; top: 50%; transform: translateY(-50%); z-index: 10;">
                    <input type="checkbox" id="masterCheckbox" onchange="toggleAllCheckboxes()" />
                </div>
                <h2>
                    <button class="accordion-button collapsed custom-header-btn" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseHeader" aria-expanded="false" aria-controls="collapseHeader"
                        id="headerAccordion" disabled style="padding-left: 50px;">
                        <table class="table-responsive w-100">
                            <thead class="text-center">
                                <tr>
                                    <th class="custom-col field-padding"></th>
                                        <!-- Space -->
                                    </th>
                                    <th class="custom-col field-padding">
                                        ID
                                    </th>
                                    <th
                                        class="col-3 d-table-cell d-sm-table-cell Regulation-Manual-size  field-padding">
                                        Regulation/ Manual name</th>
                                    <th class="col-1 d-none d-md-table-cell field-padding">Section</th>
                                    <th class="col-2 d-none d-md-table-cell field-padding">Version Number
                                    </th>
                                    <th class="col-2 d-none d-lg-table-cell field-padding">Approving Date
                                    </th>
                                    <th class="col-3 d-none d-lg-table-cell field-padding">Responsible
                                        Entity</th>
                                </tr>
                            </thead>
                        </table>
                    </button>
                </h2>
                <div id="collapseHeader" class="accordion-collapse collapse" aria-labelledby="headingHeader"
                    data-bs-parent="#headerAccordion">
                    <!-- يمكنك إضافة محتوى إضافي هنا إذا لزم الأمر -->
                </div>
            </div>
        </div>
    </div>




    <div class="container">
        <!-- The red line!! -->
        <div class="red-line"></div>
    </div>




    <!-- Accordion Menu -->
    <div class="container">
        <div class="row" g-4>
            <!-- سيتم وضع كل عنصر أكورديون داخل col-12, max size for col is 12 -->
            <div class="col-12">
                @if (Model != null && Model.Any())
                {
                    <div class="accordion" id="regulationAccordion">
                        @{ int i = 0; }
                        @foreach (var record in Model)
                        {
                            i++;
                            var itemNumber = i;
                            var headingId = "heading" + itemNumber;
                            var collapseId = "collapse" + itemNumber;
                            <!-- Accordion Item 1 -->
                            <div class="accordion-item position-relative" data-section="@(record.Sections ?? "")" data-document-type="@(record.DocumentType ?? "")">
                                <!-- Checkbox positioned outside accordion button -->
                                <div class="position-absolute field-padding" style="left: 20px; top: 50%; transform: translateY(-50%); z-index: 10;">
                                    <input type="checkbox" class="record-checkbox" data-record-id="@record.Id" onclick="handleRecordCheckbox()" />
                                </div>
                                <h2 class="accordion-header" id="@headingId">
                                    <button class="accordion-button collapsed custom-acc-btn" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#@collapseId" aria-expanded="false"
                                        aria-controls="@collapseId" onclick="showAdminRecordDetails(@record.Id)"
                                        style="padding-left: 50px;">
                                        <table class=" w-100">
                                            <thead class="text-center">
                                                <tr>
                                                    <th class="custom-col field-padding">
                                                        <!-- Space -->
                                                    </th>
                                                    <th class="custom-col field-padding">
                                                        @record.Id
                                                    </th>
                                                    <th
                                                        class="col-3 d-table-cell d-sm-table-cell Regulation-Manual-size field-padding">
                                                        @record.RegulationName</th>
                                                    <th class="col-1 d-none d-md-table-cell field-padding">
                                                        @record.Sections</th>
                                                    <th class="col-2 d-none d-md-table-cell field-padding">
                                                        @record.Version
                                                    </th>
                                                    <th class="col-2 d-none d-lg-table-cell field-padding">
                                                        @record.ApprovalDate</th>
                                                    <th class="col-3 d-none d-lg-table-cell field-padding">IAU
                                                        @record.ApprovingEntity</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </button>
                                </h2>
                            </div>
                            <div id="@collapseId" class="accordion-collapse collapse" aria-labelledby="@headingId"
                                data-bs-parent="#regulationAccordion">
                                <!-- content of accordion -->
                                <div class="accordion-body">
                                    <form id="recordForm_@record.Id" method="post" action="@Url.Action("UpdateRecord", "Admin")" onsubmit="return handleFormSubmit(event, @record.Id)">
                                        @Html.AntiForgeryToken()
                                        <input type="hidden" name="recordId" value="@record.Id" />
                                        
                                        <div class="row mb-2">
                                            <!-- left side of the accordion menu inside -->
                                            <div class="col-lg-6 col-12 mb-3 mb-lg-0">
                                                <div class="table-responsive">
                                                    <table class="table table-borderless mb-0">
                                                        <tr>
                                                            <td colspan="3">
                                                                <label class="form-label fw-bold">Regulation/ Manual
                                                                    name</label>
                                                                <textarea name="regulationName" class="form-control" rows="2"
                                                            readonly disabled>@record.RegulationName</textarea>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="3">
                                                                <label class="form-label fw-bold">Brief
                                                                    Description</label>
                                                                <textarea name="description" class="form-control" rows="4"
                                                            readonly disabled>@record.Description</textarea>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="col-12 col-sm-4">
                                                                <label class="form-label fw-bold">Approving
                                                                    Date</label>
                                                                <input type="date" name="approvalDate" class="form-control mb-2" value="@record.ApprovalDate"
                                                                    readonly disabled>
                                                            </td>
                                                            <td class="col-12 col-sm-4">
                                                                <label class="form-label fw-bold">Version Date</label>
                                                                <input type="date" name="versionDate" class="form-control mb-2" value="@record.VersionDate"
                                                                    readonly disabled>
                                                            </td>

                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <label class="form-label fw-bold">Version
                                                                    Number</label>
                                                                <input type="text" name="version" class="form-control mb-2" value="@record.Version"
                                                                    readonly disabled>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <label class="form-label fw-bold">Approving Entity</label>
                                                                <input type="text" name="approvingEntity" class="form-control"
                                                                    value="@record.ApprovingEntity" readonly disabled>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <label class="fw-bold">Responsible
                                                                    Department</label>
                                                                <select name="department" class="form-select" disabled>
                                                                    <option value="@record.Department" selected>@record.Department</option>
                                                                    <option value="Reg and Admission">Reg and Admission</option>
                                                                    <option value="CCSIT">CCSIT</option>
                                                                    <option value="Communication and tech">Communication and tech</option>
                                                                    <option value="Hospital">Hospital</option>
                                                                    <option value="Library">Library</option>
                                                                    <option value="Students Affairs">Students Affairs</option>
                                                                    <option value="Preparetory">Preparetory</option>
                                                                    <option value="Academic Affairs">Academic Affairs</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <label class="form-label fw-bold">Note</label>
                                                                <input type="text" name="notes" class="form-control mb-2"
                                                                    value="@record.Notes" readonly disabled>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>

                                            <!-- right side of the accordion menu insde-->
                                            <div class="col-lg-6 col-12">
                                                <div class="table-responsive">
                                                    <table class="table table-borderless mb-0">
                                                        <tr>
                                                            <td>
                                                                <label class="form-label fw-bold">Document
                                                                    Type</label>
                                                                <select name="documentType" class="form-select mb-2" disabled>
                                                                    <option value="@record.DocumentType" selected>@record.DocumentType</option>
                                                                    <option value="regulation">Regulations</option>
                                                                    <option value="guidelines">Guidelines</option>
                                                                    <option value="policy">Policies</option>
                                                                </select>
                                                            </td>
                                                            <td>
                                                                <label class="form-label fw-bold">Section</label>
                                                                <select name="sections" class="form-select mb-2" disabled>
                                                                    <option value="@record.Sections" selected>@record.Sections</option>
                                                                    <option value="Student">Student</option>
                                                                    <option value="Members">Members</option>
                                                                    <option value="Enrolled Program">Enrolled Program</option>
                                                                </select>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <label class="form-label fw-bold">Attach word file</label>
                                                                @{
                                                                    var wordAttachment = ((IEnumerable<dynamic>)record.Attachments)?.FirstOrDefault(a => a.FileType?.ToString()?.ToLower() == "word" || a.FileType?.ToString()?.ToLower() == "docx");
                                                                }
                                                                <div class="input-group mb-2">
                                                                    <input type="text" class="form-control attachment-display" 
                                                                           id="wordDisplay_@record.Id"
                                                                           value="@(wordAttachment?.OriginalName ?? "")" 
                                                                           readonly disabled>
                                                                    <input type="file" id="wordFile_@record.Id" class="d-none" accept=".doc,.docx" 
                                                                           onchange="handleFileSelection(@record.Id, 'word', this)" disabled>
                                                                    <span class="input-group-text attachment-upload-btn" 
                                                                          id="wordUploadBtn_@record.Id"
                                                                          style="cursor: not-allowed; opacity: 0.6;" 
                                                                          title="Click Edit to enable file upload">
                                                                        <i class="bi bi-paperclip">
                                                                            <img src="~/svgs/admin/upload-file.svg" alt="upload-file" />
                                                                        </i>
                                                                    </span>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <label class="form-label fw-bold">Attach PDF file</label>
                                                                @{
                                                                    var pdfAttachment = ((IEnumerable<dynamic>)record.Attachments)?.FirstOrDefault(a => a.FileType?.ToString()?.ToLower() == "pdf");
                                                                }
                                                                <div class="input-group mb-2">
                                                                    <input type="text" class="form-control attachment-display" 
                                                                           id="pdfDisplay_@record.Id"
                                                                           value="@(pdfAttachment?.OriginalName ?? "")" 
                                                                           readonly disabled>
                                                                    <input type="file" id="pdfFile_@record.Id" class="d-none" accept=".pdf" 
                                                                           onchange="handleFileSelection(@record.Id, 'pdf', this)" disabled>
                                                                    <span class="input-group-text attachment-upload-btn" 
                                                                          id="pdfUploadBtn_@record.Id"
                                                                          style="cursor: not-allowed; opacity: 0.6;" 
                                                                          title="Click Edit to enable file upload">
                                                                        <i class="bi bi-paperclip">
                                                                            <img src="~/svgs/admin/upload-file.svg" alt="upload-file" />
                                                                        </i>
                                                                    </span>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <label class="form-label fw-bold">Responsible
                                                                    Department
                                                                    contact
                                                                    information:</label>
                                                                @if (record.ContactInformation != null && ((IEnumerable<dynamic>)record.ContactInformation).Any())
                                                                {
                                                                    @foreach (var contact in record.ContactInformation)
                                                                    {
                                                                        <div class="mb-3 p-3 border rounded">
                                                                            <div class="mb-3">
                                                                                <label class="form-label mb-0">Name
                                                                                    </label>
                                                                                <input type="text" class="form-control contact-input"
                                                                                    value="@contact.Name" readonly>
                                                                            </div>
                                                                            @if (!string.IsNullOrEmpty(contact.Email?.ToString()))
                                                                            {
                                                                                <div class="mb-3">
                                                                                    <label class="form-label mb-0">E-mail</label>
                                                                                    <input type="email" class="form-control contact-input"
                                                                                        value="@contact.Email" readonly>
                                                                                </div>
                                                                            }
                                                                            @if (!string.IsNullOrEmpty(contact.Telephone?.ToString()))
                                                                            {
                                                                                <div class="mb-3">
                                                                                    <label class="form-label mb-0">Telephone
                                                                                        number</label>
                                                                                    <input type="text" class="form-control contact-input" value="@contact.Telephone"
                                                                                        readonly>
                                                                                </div>
                                                                            }
                                                                            @if (!string.IsNullOrEmpty(contact.Mobile?.ToString()))
                                                                            {
                                                                                <div class="mb-3">
                                                                                    <label class="form-label mb-0">Mobile
                                                                                        number</label>
                                                                                    <input type="text" class="form-control contact-input" value="@contact.Mobile"
                                                                                        readonly>
                                                                                </div>
                                                                            }
                                                                        </div>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <div class="mb-3">
                                                                        <p class="text-muted">No contact information available for this department.</p>
                                                                    </div>
                                                                }
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- الأزرار -->
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <div class="d-flex flex-wrap justify-content-end gap-2">
                                                    <button type="button" class="btn btn-danger" onclick="deleteRecord(@record.Id)">Delete</button>
                                                    <button type="button" class="btn btn-secondary edit-btn" onclick="toggleEditMode(@record.Id)">Edit</button>
                                                    <button type="submit" class="btn btn-success save-btn" style="display: none;">Save</button>
                                                    <button type="button" class="btn btn-outline-secondary cancel-btn" style="display: none;" onclick="cancelEdit(@record.Id)">Cancel</button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <div class="mb-4"></div>
                        }
                    </div>
                }
                else
                {
                    <!-- No records message for admin -->
                    <div class="alert alert-info text-center">
                        <h4>No records found</h4>
                        <p>There are currently no rules and regulations in the database.</p>
                        <a href="@Url.Action("AddNewRecord", "Admin")" class="btn btn-primary">
                            <i class="fas fa-plus me-2"></i>Add New Record
                        </a>
                    </div>
                }
            </div>
        </div>
    </div>
</div>