@model IEnumerable<dynamic>
@using Microsoft.AspNetCore.Localization

@{
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    var currentCulture = requestCulture?.RequestCulture.Culture.Name ?? "en-US";
    var isArabic = currentCulture == "ar-SA";
}

<!-- This File is about the admin page that controls what to be added, wheather its a new record or contact. in this page you can edit and delete.
there's also many filtering options to find the policy and other adminstrative stuff-->
@section Styles {
    <link rel="stylesheet" href="~/css/style.css">
    <link rel="stylesheet" href="~/css/AdminPage.css">
    <link rel="stylesheet" href="~/css/_rtl_Styles.css">
    <link rel="stylesheet" href="~/css/AdminPageCustom.css">
    <link rel="stylesheet" href="~/css/homePage.css">
}
<!-- Scripts for the admin page -->
@section Scripts {
    <script src="@Url.Content("~/js/card-animations.js")"></script>
    <script src="@Url.Content("https://cdn.jsdelivr.net/npm/fitty@2.3.6/dist/fitty.min.js")"></script>
    <script src="@Url.Content("https://cdn.jsdelivr.net/npm/chart.js")"></script>
    <script src="@Url.Content("~/js/StatisticsInAdmin.js")"></script>
    <script src="~/js/ShowDetailsTracking.js"></script>
    <script src="@Url.Content("~/js/AdminTable.js")"></script>
    <script src="@Url.Content("~/js/adminVisitChart.js")"></script>
    <script src="@Url.Content("~/js/adminPageValidation.js")"></script>
    <script src="@Url.Content("~/js/languageSwitcher.js")"></script>
}

<!-- This is the header section of the admin page -->
<header class="menu">

    <div class="container-fluid h-100 bootstrap-wrapper">
        <div class="row align-items-center h-100 g-0">
            <div class="col-auto">
                <div class="d-flex align-items-center justify-content-around ms-3 gap-3 me-3 ">

                    <button id="burgerBtn" class="navbar-toggler d-lg-none me-2" style="margin-left: 15px;"
                        type="button">
                        <img src="~/svgs/navigation/hamburger-menu.svg" alt="Menu" width="36" height="36" />
                    </button>

                    <!------------------- Logout Button ------------------->
                    <div class="d-none d-lg-block d-xl-block">
                        <form method="post" action="@Url.Action("Logout", "Account")" style="margin: 0">
                            @Html.AntiForgeryToken()
                            <button class="desktop-logo d-flex logo header-nav" type="submit" style="">
                                <img src="~/svgs/navigation/logout.svg" alt="Menu" width="36px" height="36px" />
                                <span class="poppins-regular" id="Logout345"></span>
                            </button>
                        </form>
                    </div>

                    <!-------- Vertical Divider -------->
                    <div class="vr d-none d-lg-block d-xl-block" style="color: aliceblue; opacity: 0.75;"></div>
                    <!-------- Vertical Divider -------->

                    <!-------------------- Language Switcher ------------------->
                    <div class="language-switcher-container d-none d-lg-block d-xl-block">
                        <button id="language-toggle" class="language-toggle-btn desktop-logo logo header-nav">
                            <img src="~/svgs/navigation/language.svg" alt="Language" width="36px" height="36px" />
                            <span class="poppins-regular" id="Language345"></span>
                        </button>
                    </div>

                    <!-------- Vertical Divider ------>
                    <div class="vr d-none d-lg-block d-xl-block" style="color: aliceblue; opacity: 0.75;"></div>
                    <!-------- Vertical Divider ------>

                    <!--------------------- Exit Edit Mode Button ------------------->
                    <div class="d-none d-lg-block d-xl-block">
                        <button class="desktop-logo logo header-nav d-none d-lg-flex"
                            onclick="location.href='@Url.Action("homePage", "Home")'">
                            <img src="~/svgs/nav-buttons/Normal-AdminView.svg" alt="Exit" width="36" height="36" />
                            <span class="poppins-regular" id="admin-exit-view-button">Exit edit mode</span>

                        </button>
                    </div>
                </div>
            </div>

            <div class="col d-flex flex-nowrap align-items-center justify-content-center">
                <!-- Search section removed as requested -->
            </div>

            <div class="col-auto flex-nowrap">
                <div>

                    <img class="profile-icon d-none d-xl-block" src="~/imgs/B&W IAU Logo (Horizontal).png"
                        alt="IAU Logo">

                    <img class="profile-icon iau-logo d-sm-block d-xl-none" src="~/imgs/B&W IAU Logo.png"
                        alt="IAU Logo">
                </div>
            </div>

        </div>
    </div>

</header>

<!-- Success/Error Messages -->
<div class="container mt-3">
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
</div>

<!--the statistics part of the admin page-->
<div class="dashboard-container">
    <!-- Main Rectangle Container -->
    <div class="dashboard-rectangle mb-footer-space">
        <div class="main-row d-flex flex-xl-row flex-column">
            <!-- Left Section - Charts -->
            <div class="charts-section">
                <div class="row g-0 flex-fill">
                    <!-- Donut Chart -->
                    <div class="col-12 col-md-6 col-xl-6">
                        <div class="chart-section">
                            <div id="admin-chart-title-overview" class="chart-title">University Rules and Guidelines
                                Overview</div>
                            <div class="donut-chart-container">
                                <div class="donut-chart-canvas">
                                    <canvas id="chartCanvas"></canvas>
                                </div>
                                <div class="legend-container">
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #8B4513;"></div>
                                        <span id="admin-chart-legend-academic-rules" class="legend-text">Academic
                                            rules</span>
                                        <span class="legend-percentage">40%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #2E8B57;"></div>
                                        <span id="admin-chart-legend-employment-rules" class="legend-text">Employment
                                            rules & regulations</span>
                                        <span class="legend-percentage">30%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #4682B4;"></div>
                                        <span id="admin-chart-legend-student-rules" class="legend-text">Student rules &
                                            regulations</span>
                                        <span class="legend-percentage">25%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #DAA520;"></div>
                                        <span id="admin-chart-legend-student-guides" class="legend-text">Student rules &
                                            regulations</span>
                                        <span class="legend-percentage">15%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bar Chart -->
                    <div class="col-12 col-md-6 col-xl-6">
                        <div class="chart-section">
                            <div id="admin-chart-title-visits" class="chart-title">Website visits over the past 6 months
                            </div>
                            <div id="visitToggler" class="legendToggler"> Monthly Visits </div>
                            <div class="chart-canvas-container">
                                <canvas id="barChartCanvas"></canvas>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- Right Sidebar -->
            <div class="sidebar-section col-12 col-xl-auto">
                <div class="sidebar-container">
                    <!-- Cards Section -->
                    <div class="sidebar-cards">
                        <!-- Total Records Card -->
                        <div class="stats-card stats-card-blue">
                            <h6 id="admin-stats-total-policies">Total Records</h6>
                            <div class="number">30</div>
                        </div>

                        <!-- Most Viewed Card -->
                        <div class="stats-card stats-card-green">
                            <h6 id="admin-stats-most-viewed">Most Viewed</h6>
                            <div class="subtitle">Loading...</div>
                            <div class="viewed-text">Viewed: 0 times</div>
                        </div>
                    </div>

                    <!-- Buttons Section -->
                    <div class="sidebar-buttons">
                        <!-- View Report Button -->
                        <button class="btn-custom btn-primary-custom" id="admin-button-view-report"
                            onclick="location.href='@Url.Action("ViewReport", "Admin")'">
                            View Report
                        </button>

                        <!-- Add New Record Button -->
                        <button class="btn-custom btn-dark-custom" id="admin-button-add-new-record"
                            onclick="location.href='@Url.Action("AddNewRecord", "Admin")'">
                            add new record
                        </button>

                        <!-- Export Data Button -->
                        <button class="btn-custom btn-dark-custom" id="admin-button-export-data" onclick="exportData()">
                            Export Data
                        </button>



                        <button class="btn-custom btn-success-custom" id="admin-button-manage-contact-info"
                            onclick="location.href='@Url.Action("ManageContactInfo", "Admin")'">
                            Manage Contact Info
                        </button>

                        <!-- Assign New Editor Button - Only visible to Admins -->
                        @if (User.IsInRole("Admin"))
                        {
                            <button class="btn-custom btn-warning-custom" id="admin-button-assign-editor"
                                onclick="location.href='@Url.Action("AssignNewEditor", "Admin")'">
                                Assign New Editor
                            </button>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!--------------------- the table part of the admin page ---------------------->

<!------- Search, Section and Document type Bar ------->
<div class="container my-4">
    <section>
        <div class="container">
            <table class="w-100">
                <thead class="text-center">
                    <tr>
                        <th class="col-8 d-none d-md-table-cell padding-between-search-filter">
                            <div class="col flex-nowrap align-items-center">
                                <div class="search-container d-flex align-items-center position-relative">
                                    <button class="search-and-filter-buttons">
                                        <img src="~/svgs/navigation/search-icon.svg" alt="Search" class="search-icon"
                                            width="44" height="44" />
                                    </button>
                                    <input id="desktopSearchInput"
                                        class="search poppins-regular flex-grow-1 small-font-size" type="text"
                                        placeholder="Search by Name/ID..."
                                        style="color: #ABB7C2; background: transparent; border: none; padding-inline-end: 30px;">
                                    <button id="desktopClearBtn" class="position-absolute"
                                        style="inset-inline-end: 5px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #ABB7C2; font-size: 18px; cursor: pointer; display: none;"
                                        onclick="clearSearchInput('desktop')" title="Clear search">
                                        ×
                                    </button>
                                </div>
                            </div>
                        </th>


                        <th class="col-4 d-none d-md-table-cell padding-between-search-filter">
                            <div class="col flex-nowrap align-items-center">
                                <div class="search-container d-flex align-items-center px-2" id="document-search">
                                    <select id="adminDocumentFilter"
                                        class="search poppins-regular flex-grow-1 small-font-size"
                                        style="color: #ABB7C2; border: none;">
                                        <option value="all" id="admin-document-filter-all">All Documents</option>
                                        <option value="Student guides & templates"
                                            id="admin-chart-legend-student-guides2">Student guides & templates</option>
                                        <option value="Student rules & regulations"
                                            id="admin-chart-legend-student-rules2">Student rules & regulations</option>
                                        <option value="Employees’ rules & regulations"
                                            id="admin-chart-legend-employment-rules2">Employees’ rules & regulations
                                        </option>
                                        <option value="Academic rules & regulations"
                                            id="admin-chart-legend-academic-rules2">Academic rules & regulations
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </th>

                        <!-- #region  delete button -->
                        <th class="col d-none d-md-table-cell padding-between-search-filter">
                            <div class="delete-btn-container d-flex align-items-center px-2">
                                <button class="search-and-filter-buttons" onclick="deleteSelectedRecords()">
                                    <img src="~/svgs/admin/Delete-Button.svg" alt="Delete btn" />
                                </button>
                            </div>
                        </th>
                    </tr>
                </thead>
            </table>
        </div>
    </section>

    <!------- Mobile Search and Filter Section ------->
    <section>
        <div class="container">
            <!-- Wrapper with background color -->
            <div class="row gy-3 mb-3 mt-1" style="background-color: #2f3e5f; border-radius: 12px;">
                <!-- Search by Name/ID (Visible only on small screens, hidden on larger screens) -->
                <div class="col-12 d-md-none d-flex align-items-center" style="margin-top: 10px; gap: 10px;">
                    <!-- Search Container (Take remaining space) -->
                    <div class="search-container d-flex align-items-center flex-grow-1 position-relative"
                        style="border: 2px solid whitesmoke; border-radius: 8px;">
                        <button class="search-and-filter-buttons">
                            <img src="~/svgs/navigation/search-icon.svg" alt="Search" class="search-icon" width="44"
                                height="44" />
                        </button>
                        <input id="mobileSearchInput" class="search poppins-regular flex-grow-1" type="text"
                            placeholder="Search by Name/ID..."
                            style="color: #ABB7C2; border: none; background: transparent; padding-inline-end: 30px;">
                        <button id="mobileClearBtn" class="position-absolute"
                            style="inset-inline-end: 5px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #ABB7C2; font-size: 18px; cursor: pointer; display: none;"
                            onclick="clearSearchInput('mobile')" title="Clear search">
                            ×
                        </button>
                    </div>


                </div>

                <!-- Section and Document Type Dropdowns (Visible only on small screens, hidden on larger screens) -->
                <div class="col-12 d-md-none d-flex align-items-center" style="gap: 10px;">

                    <!-- Document Type Dropdown -->
                    <div class="d-flex align-items-center p-0 flex-grow-1" style="margin-bottom: 10px;">
                        <div class="search-container d-flex align-items-center w-100" id="section-document-search-2">
                            <select id="mobileDocumentFilter" class="search poppins-regular flex-grow-1"
                                style="color: #ABB7C2;">
                                <option value="all" id="admin-document-filter-all1">All Documents</option>
                                <option value="Student guides & templates" id="admin-chart-legend-student-guides1">
                                    Student guides & templates</option>
                                <option value="Student rules & regulations" id="admin-chart-legend-student-rules1">
                                    Student rules & regulations</option>
                                <option value="Employees’ rules & regulations"
                                    id="admin-chart-legend-employment-rules1">Employees’ rules & regulations</option>
                                <option value="Academic rules & regulations" id="admin-chart-legend-academic-rules1">
                                    Academic rules & regulations</option>
                            </select>
                        </div>
                    </div>

                    <!-- Delete Button (Fixed width) -->
                    <div class="delete-btn-container d-flex align-items-center p-0 justify-content-center"
                        id="delete-btn-mobile">
                        <button class="search-and-filter-buttons" onclick="deleteSelectedRecords()">
                            <img src="~/svgs/admin/Delete-Button.svg" alt="Delete btn" />
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!------- base Record ------->
    <div class="container">
        <div class="accordion">
            <div class="accordion-item position-relative">
                <!-- Master Checkbox positioned outside accordion button -->
                <div class="position-absolute field-padding"
                    style="inset-inline-start: 20px; top: 50%; transform: translateY(-50%); z-index: 10;">
                    <input type="checkbox" id="masterCheckbox" onchange="toggleAllCheckboxes()" />
                </div>
                <h2>
                    <button class="accordion-button collapsed custom-header-btn" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseHeader" aria-expanded="false" aria-controls="collapseHeader"
                        id="headerAccordion" disabled style="padding-inline-start: 50px;">
                        <table class="table-responsive w-100">
                            <thead class="text-center">
                                <tr>
                                    <th class="custom-col field-padding"></th>
                                    <!-- Space -->
                                    </th>
                                    <th class="custom-col field-padding" id="admin-table-header-id">
                                        ID
                                    </th>
                                    <th class="col-3 d-table-cell d-sm-table-cell Regulation-Manual-size  field-padding"
                                        id="admin-table-header-regulation-name">
                                        Regulation/ Manual name</th>
                                    <th class="col-2 d-none d-md-table-cell field-padding"
                                        id="admin-table-header-documentType">Document Type</th>
                                    <th class="col-2 d-none d-md-table-cell field-padding"
                                        id="admin-table-header-version-number">Version Number
                                    </th>
                                    <th class="col-2 d-none d-lg-table-cell field-padding"
                                        id="admin-table-header-approving-date">Approving Date
                                    </th>
                                    <th class="col-3 d-none d-lg-table-cell field-padding"
                                        id="admin-table-header-responsible-entity">Responsible
                                        Entity</th>
                                </tr>
                            </thead>
                        </table>
                    </button>
                </h2>
                <div id="collapseHeader" class="accordion-collapse collapse" aria-labelledby="headingHeader"
                    data-bs-parent="#headerAccordion">
                    <!-- يمكنك إضافة محتوى إضافي هنا إذا لزم الأمر -->
                </div>
            </div>
        </div>
    </div>




    <div class="container">
        <!-- The red line!! -->
        <div class="red-line"></div>
    </div>




    <!-- Accordion Menu -->
    <div class="container">
        <div class="row" g-4>
            <!-- سيتم وضع كل عنصر أكورديون داخل col-12, max size for col is 12 -->
            <div class="col-12">
                @if (Model != null && Model.Any())
                {
                    <div class="accordion" id="regulationAccordion">
                        @{
                            int i = 0;
                        }
                        @foreach (var record in Model)
                        {
                            i++;
                            var itemNumber = i;
                            var headingId = "heading" + itemNumber;
                            var collapseId = "collapse" + itemNumber;

                            var displayName = isArabic && !string.IsNullOrEmpty(record.RegulationNameAr)
                            ? record.RegulationNameAr
                            : record.RegulationName;

                            var displayApprovingEntity = isArabic && !string.IsNullOrEmpty(record.ApprovingEntityAr)
                            ? record.ApprovingEntityAr
                            : record.ApprovingEntity;

                            // Document Type translation logic
                            var displayDocumentType = record.DocumentType;
                            if (isArabic)
                            {
                                switch (record.DocumentType)
                                {
                                    case "Student guides & templates":
                                        displayDocumentType = "أدلة ونماذج الطلاب";
                                        break;
                                    case "Student rules & regulations":
                                        displayDocumentType = "قواعد وأنظمة الطلاب";
                                        break;
                                    case "Employees’ rules & regulations":
                                        displayDocumentType = "قواعد وأنظمة الموظفين";
                                        break;
                                    case "Academic rules & regulations":
                                        displayDocumentType = "قواعد وأنظمة أكاديمية";
                                        break;
                                }
                            }

                            // Department translation logic
                            var displayDepartment = record.Department;
                            if (isArabic)
                            {
                                switch (record.Department)
                                {
                                    case "Reg and Admission":
                                        displayDepartment = "التسجيل والقبول";
                                        break;
                                    case "CCSIT":
                                        displayDepartment = "كلية علوم الحاسب وتقنية المعلومات";
                                        break;
                                    case "Communication and tech":
                                        displayDepartment = "الاتصالات والتقنية";
                                        break;
                                    case "Hospital":
                                        displayDepartment = "المستشفى";
                                        break;
                                    case "Library":
                                        displayDepartment = "المكتبة";
                                        break;
                                    case "Students Affairs":
                                        displayDepartment = "شؤون الطلاب";
                                        break;
                                    case "Preparetory":
                                        displayDepartment = "السنة التحضيرية";
                                        break;
                                    case "Academic Affairs":
                                        displayDepartment = "الشؤون الأكاديمية";
                                        break;
                                }
                            }

                            <!-- Accordion Item 1 -->
                            <div class="accordion-item position-relative" data-section="@(record.Sections ?? "")"
                                data-document-type="@(record.DocumentType ?? "")">
                                <!-- Checkbox positioned outside accordion button -->
                                <div class="position-absolute field-padding"
                                    style="inset-inline-start: 20px; top: 50%; transform: translateY(-50%); z-index: 10;">
                                    <input type="checkbox" class="record-checkbox" data-record-id="@record.Id"
                                        onclick="handleRecordCheckbox()" />
                                </div>
                                <h2 class="accordion-header" id="@headingId">
                                    <button class="accordion-button collapsed custom-acc-btn" type="button"
                                        data-bs-toggle="collapse" data-bs-target="#@collapseId" aria-expanded="false"
                                        aria-controls="@collapseId" data-record-id="@record.Id"
                                        style="padding-inline-start: 50px;">
                                        <table class=" w-100">
                                            <thead class="text-center">
                                                <tr>
                                                    <th class="custom-col field-padding">
                                                        <!-- Space -->
                                                    </th>
                                                    <th class="custom-col field-padding">
                                                        @record.Id
                                                    </th>
                                                    <th class="col-3 d-table-cell d-sm-table-cell Regulation-Manual-size field-padding"
                                                        style="max-width: 100px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                                                        title="@displayName">
                                                        @displayName</th>
                                                    <th class="col-2 d-none d-md-table-cell field-padding"
                                                        style="max-width: 111px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                                                        title="@displayDocumentType">
                                                        @displayDocumentType</th>
                                                    <th class="col-2 d-none d-md-table-cell field-padding"
                                                        style="max-width: 100px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                                                        title="@record.Version">
                                                        @record.Version
                                                    </th>
                                                    <th class="col-2 d-none d-lg-table-cell field-padding"
                                                        style="max-width: 100px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                                                        title="@record.ApprovalDate">
                                                        @record.ApprovalDate</th>
                                                    <th class="col-3 d-none d-lg-table-cell field-padding"
                                                        style="max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                                                        title="@displayApprovingEntity">
                                                        @displayApprovingEntity</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </button>
                                </h2>
                            </div>
                            <div id="@collapseId" class="accordion-collapse collapse" aria-labelledby="@headingId"
                                data-bs-parent="#regulationAccordion">
                                <!-- content of accordion -->
                                <div class="accordion-body">
                                    <!-- Content will be loaded dynamically via AJAX -->
                                </div>
                            </div>

                            <div class="mb-4"></div>
                        }
                    </div>
                }
                else
                {
                    <!-- No records message for admin -->
                    <div class="alert alert-info text-center">
                        <h4 id="admin-no-records-heading" dir="rtl">No Records Found</h4>
                        <p id="admin-no-records-message" dir="rtl">No rules and regulations are currently available in the
                            database</p>
                        <a href="@Url.Action("AddNewRecord", "Admin")" class="btn btn-primary">
                            <i class="fas fa-plus me-2" id="admin-add-new-record-button"></i>
                        </a>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<!-- Export Table Selection Modal -->
<div class="modal fade" id="exportModal" tabindex="-1" aria-labelledby="exportModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="border-radius: 15px; border: none; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
            <div class="modal-header"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 15px 15px 0 0;">
                <h5 class="modal-title fw-bold" id="exportModalLabel">
                    <i class="fas fa-file-excel me-2"></i>Select Tables to Export
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <p class="text-muted mb-4">
                    <i class="fas fa-info-circle me-2"></i>Choose which database tables to include in your Excel export:
                </p>

                <form id="exportForm" method="POST" action="/Admin/ExportAllDataToExcel">
                    @Html.AntiForgeryToken()

                    <!-- Select All Option -->
                    <div class="form-check mb-3 p-3"
                        style="background: #f8f9fa; border-radius: 10px; border-inline-start: 4px solid #6c757d;">
                        <input class="form-check-input" type="checkbox" id="selectAll" name="tables" value="all"
                            checked>
                        <label class="form-check-label fw-bold" for="selectAll">
                            <i class="fas fa-database me-2 text-secondary"></i>All Tables
                        </label>
                        <small class="d-block text-muted mt-1">Export all available database tables</small>
                    </div>

                    <hr class="my-3">

                    <!-- Individual Table Options -->
                    <div class="row g-3">
                        <div class="col-12">
                            <div class="form-check p-3"
                                style="background: #f0f8ff; border-radius: 10px; border-inline-start: 4px solid #17a2b8;">
                                <input class="form-check-input table-checkbox" type="checkbox" id="recordsTable"
                                    name="tables" value="records" checked>
                                <label class="form-check-label" for="recordsTable">
                                    <i class="fas fa-file-alt me-2 text-info"></i><strong>Records</strong>
                                </label>
                                <small class="d-block text-muted mt-1">All regulation and policy records</small>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="form-check p-3"
                                style="background: #e8f5e8; border-radius: 10px; border-inline-start: 4px solid #28a745;">
                                <input class="form-check-input table-checkbox" type="checkbox" id="usersTable"
                                    name="tables" value="users" checked>
                                <label class="form-check-label" for="usersTable">
                                    <i class="fas fa-users me-2 text-success"></i><strong>Users</strong>
                                </label>
                                <small class="d-block text-muted mt-1">All registered users information</small>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="form-check p-3"
                                style="background: #fff5e6; border-radius: 10px; border-inline-start: 4px solid #ffc107;">
                                <input class="form-check-input table-checkbox" type="checkbox" id="contactTable"
                                    name="tables" value="contact" checked>
                                <label class="form-check-label" for="contactTable">
                                    <i class="fas fa-address-book me-2 text-warning"></i><strong>Contact
                                        Information</strong>
                                </label>
                                <small class="d-block text-muted mt-1">Department contact details</small>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="form-check p-3"
                                style="background: #ffeaea; border-radius: 10px; border-inline-start: 4px solid #dc3545;">
                                <input class="form-check-input table-checkbox" type="checkbox" id="attachmentsTable"
                                    name="tables" value="attachments" checked>
                                <label class="form-check-label" for="attachmentsTable">
                                    <i class="fas fa-paperclip me-2 text-danger"></i><strong>Attachments</strong>
                                </label>
                                <small class="d-block text-muted mt-1">File attachments and documents</small>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="form-check p-3"
                                style="background: #f0f0ff; border-radius: 10px; border-inline-start: 4px solid #6f42c1;">
                                <input class="form-check-input table-checkbox" type="checkbox" id="historyTable"
                                    name="tables" value="history" checked>
                                <label class="form-check-label" for="historyTable">
                                    <i class="fas fa-history me-2 text-primary"></i><strong>User History</strong>
                                </label>
                                <small class="d-block text-muted mt-1">User activity and action logs</small>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer bg-light" style="border-radius: 0 0 15px 15px;">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Cancel
                </button>
                <button type="button" class="btn btn-primary" onclick="confirmExport()" id="confirmExportBtn">
                    <i class="fas fa-download me-2"></i>Export Selected Tables
                </button>
            </div>
        </div>
    </div>
</div>

@await Html.PartialAsync("_Footer")