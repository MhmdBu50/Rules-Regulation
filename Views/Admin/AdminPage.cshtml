<!-- This File is about the admin page that controls what to be added, wheather its a new record or contact. in this page you can edit and delete.
there's also many filtering options to find the policy and other adminstrative stuff-->
@section Styles {
    <link rel="stylesheet" href="~/css/AdminPage.css">
}
<!-- Scripts for the admin page -->
@section Scripts {
    <script src="@Url.Content("~/js/card-animations.js")"></script>
    <script src="@Url.Content("https://cdn.jsdelivr.net/npm/fitty@2.3.6/dist/fitty.min.js")"></script>
    <script src="@Url.Content("js/bootstrap.js")"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/js/StatisticsInAdmin.js"></script>

}

<!-- This is the header section of the admin page -->
<header class="menu">
    <div class="container-fluid h-100 bootstrap-wrapper">
        <div class="row align-items-center h-100 g-0">
            <!-- Left Section - Logo/Hamburger -->
            <div class="col-auto">
                <div class="d-flex align-items-center">

                    <!-- Language Logo -->
                    <img src="~/svgs/navigation/desktop-logo.svg" alt="IAU Logo" class="desktop-logo logo" width="33"
                        height="33" />
                </div>
            </div>

            <!-- Middle Section - Exit Admin view -->
            <div class="col flex-nowrap align-items-center">
                <div class=" d-flex align-items-center  justify-content-center" style="postion: absolute;">
                    <button class="exit-admin-btn " onclick="location.href='@Url.Action("homePage", "Home")'">
                        Exit Admin view
                    </button>
                </div>
            </div>

            <!-- Right Section - Profile -->
            <div class="col-auto flex-nowrap">
                <div class="signlog-container">
                    <!-- PNG version for large screens -->
                    <img class="profile-icon d-none d-xl-block" src="~/imgs/B&W IAU Logo (Horizontal).png"
                        alt="IAU Logo">

                    <!-- SVG version for smaller screens -->
                    <img class="profile-icon d-none d-sm-block d-xl-none" src="~/imgs/B&W IAU Logo.png" alt="IAU Logo">
                </div>
            </div>
        </div>
    </div>


</header>

<!--the statistics part of the admin page-->
<div class="dashboard-container">
    <!-- Main Rectangle Container -->
    <div class="dashboard-rectangle">
        <div class="main-row">
            <!-- Left Section - Charts -->
            <div class="charts-section">
                <div class="row g-0 flex-fill">
                    <!-- Donut Chart -->
                    <div class="col-md-6">
                        <div class="chart-section">
                            <div class="chart-title">University Rules and Guidelines Overview</div>
                            <div class="donut-chart-container">
                                <div class="donut-chart-canvas">
                                    <canvas id="chartCanvas"></canvas>
                                </div>
                                <div class="legend-container">
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #8B4513;"></div>
                                        <span class="legend-text">Academic rules</span>
                                        <span class="legend-percentage">40%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #2E8B57;"></div>
                                        <span class="legend-text">Employment rules & regulations</span>
                                        <span class="legend-percentage">30%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #4682B4;"></div>
                                        <span class="legend-text">Student rules & regulations</span>
                                        <span class="legend-percentage">25%</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background-color: #DAA520;"></div>
                                        <span class="legend-text">Student rules & regulations</span>
                                        <span class="legend-percentage">15%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bar Chart -->
                    <div class="col-md-6">
                        <div class="chart-section">
                            <div class="chart-title">Website visits over the past 6 months</div>
                            <div class="chart-canvas-container">
                                <canvas id="barChartCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vertical Separator to separate buttons from charts -->
            <div class="chart-sidebar-separator"></div>

            <!-- Right Sidebar -->
            <div class="sidebar-section">
                <div class="sidebar-container">
                    <!-- Cards Section -->
                    <div class="sidebar-cards">
                        <!-- Total Policies Card -->
                        <div class="stats-card stats-card-blue">
                            <h6>Total Policies</h6>
                            <div class="number">30</div>
                        </div>

                        <!-- Most Viewed Card -->
                        <div class="stats-card stats-card-green">
                            <h6>Most Viewed</h6>
                            <div class="subtitle">Student Code of Conduct</div>
                            <div class="viewed-text">Viewed: 785 times</div>
                        </div>
                    </div>

                    <!-- Buttons Section -->
                    <div class="sidebar-buttons">
                        <!-- View Report Button -->
                        <button class="btn-custom btn-primary-custom" onclick="viewReport()">
                            View Report
                        </button>

                        <!-- Add New Record Button -->
                        <button class="btn-custom btn-dark-custom"
                            onclick="location.href='@Url.Action("AddNewRecord", "Admin")'">
                            add new record
                        </button>

                        <!-- Export Data Button -->
                        <button class="btn-custom btn-dark-custom" onclick="exportData()">
                            Export Data
                        </button>

                        <!-- Contact Info Buttons -->
                        <button class="btn-custom btn-dark-custom"
                            onclick="location.href='@Url.Action("AddNewContactInfo", "Admin")'">
                            Add New Contact Info
                        </button>

                        <button class="btn-custom btn-success-custom"
                            onclick="location.href='@Url.Action("ManageContactInfo", "Admin")'">
                            Manage Contact Info
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!--------------------- the table part of the admin page ---------------------->

<!------- Search, Section and Document type Bar ------->
<div class="container my-4">
    <section>
        <div class="container">
            <table class="w-100">
                <thead class="text-center">
                    <tr>
                        <th class="col-5 d-none d-md-table-cell padding-between-search-filter">
                            <div class="col flex-nowrap align-items-center">
                                <div class="search-container d-flex align-items-center">
                                    <button class="search-and-filter-buttons">
                                        <img src="~/svgs/navigation/search-icon.svg" alt="Search" class="search-icon"
                                            width="44" height="44" />
                                    </button>
                                    <input class="search poppins-regular flex-grow-1 small-font-size" type="text"
                                        placeholder="Search by Name/ID..."
                                        style="color: #ABB7C2; background: transparent; border: none;">
                                </div>
                            </div>
                        </th>

                        <th class="col-3 d-none d-md-table-cell padding-between-search-filter">
                            <div class="col flex-nowrap align-items-center">
                                <div class="search-container d-flex align-items-center" id="section-search">
                                    <select class="search poppins-regular flex-grow-1 small-font-size" type="text"
                                        placeholder="Section" style="color: #ABB7C2; border: none;">
                                        <option value="" selected disabled>Section</option>
                                        <option>Student</option>
                                        <option>Members</option>
                                        <option>Enrolled Program</option>
                                    </select>
                                </div>
                            </div>
                        </th>

                        <th class="col-3 d-none d-md-table-cell padding-between-search-filter">
                            <div class="col flex-nowrap align-items-center">
                                <div class="search-container d-flex align-items-center px-2" id="document-search">
                                    <select class="search poppins-regular flex-grow-1 small-font-size"
                                        style="color: #ABB7C2; border: none;">
                                        <option value="" selected disabled>Document type</option>
                                        <option>Regulations</option>
                                        <option>Guidelines</option>
                                        <option>Enrolled Program</option>
                                    </select>
                                </div>
                            </div>
                        </th>

                        <th class="col d-none d-md-table-cell padding-between-search-filter">
                            <div class="delete-btn-container d-flex align-items-center px-2">
                                <button class="search-and-filter-buttons">
                                    <img src="~/svgs/admin/Delete-Button.svg" alt="Delete btn" />
                                </button>
                            </div>
                        </th>
                    </tr>
                </thead>
            </table>
        </div>
    </section>

    <!------- Mobile Search and Filter Section ------->
    <section>
        <div class="container">
            <!-- Wrapper with background color -->
            <div class="row gy-3 mb-3 mt-1" style="background-color: #2f3e5f; border-radius: 12px;">
                <!-- Search by Name/ID (Visible only on small screens, hidden on larger screens) -->
                <div class="col-12 d-md-none d-flex align-items-center" style="margin-top: 10px; gap: 10px;">
                    <!-- Search Container (Take remaining space) -->
                    <div class="search-container d-flex align-items-center flex-grow-1"
                        style="border: 2px solid whitesmoke; border-radius: 8px;">
                        <button class="search-and-filter-buttons">
                            <img src="~/svgs/navigation/search-icon.svg" alt="Search" class="search-icon" width="44"
                                height="44" />
                        </button>
                        <input class="search poppins-regular flex-grow-1" type="text" placeholder="Search by Name/ID..."
                            style="color: #ABB7C2; border: none; background: transparent;">
                    </div>

                    <!-- Delete Button (Fixed width) -->
                    <div class="delete-btn-container d-flex align-items-center justify-content-center flex-grow-1"
                        id="delete-btn-mobile">
                        <button class="search-and-filter-buttons">
                            <img src="~/svgs/admin/Delete-Button.svg" alt="Delete btn" />
                        </button>
                    </div>
                </div>

                <!-- Section and Document Type Dropdowns (Visible only on small screens, hidden on larger screens) -->
                <div class="col-12 d-md-none d-flex align-items-center" style="gap: 10px;">
                    <!-- Section Dropdown -->
                    <div class="d-flex align-items-center p-0 flex-grow-1" style="margin-bottom: 10px;">
                        <div class="search-container d-flex align-items-center w-100" id="section-document-search-2">
                            <select class="search poppins-regular flex-grow-1" style="color: #ABB7C2;">
                                <option value="" selected disabled>Section</option>
                                <option>Student</option>
                                <option>Members</option>
                                <option>Enrolled Program</option>
                            </select>
                        </div>
                    </div>

                    <!-- Document Type Dropdown -->
                    <div class="d-flex align-items-center p-0 flex-grow-1" style="margin-bottom: 10px;">
                        <div class="search-container d-flex align-items-center w-100" id="section-document-search-2">
                            <select class="search poppins-regular flex-grow-1" style="color: #ABB7C2;">
                                <option value="" selected disabled>Document type</option>
                                <option>Regulations</option>
                                <option>Guidelines</option>
                                <option>Enrolled Program</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!------- base Record ------->
    <div class="container">
        <div class="accordion">
            <div class="accordion-item">
                <h2>
                    <button class="accordion-button collapsed custom-header-btn" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseHeader" aria-expanded="false" aria-controls="collapseHeader"
                        id="headerAccordion" disabled>
                        <table class="table-responsive w-100">
                            <thead class="text-center">
                                <tr>
                                    <th class="custom-col field-padding">
                                        <input type="checkbox" />
                                    </th>
                                    <th class="custom-col field-padding">
                                        ID
                                    </th>
                                    <th
                                        class="col-3 d-table-cell d-sm-table-cell Regulation-Manual-size  field-padding">
                                        Regulation/ Manual name</th>
                                    <th class="col-1 d-none d-md-table-cell field-padding">Section</th>
                                    <th class="col-2 d-none d-md-table-cell field-padding">Version Number
                                    </th>
                                    <th class="col-2 d-none d-md-table-cell field-padding">Approving Date
                                    </th>
                                    <th class="col-3 d-none d-lg-table-cell field-padding">Responsible
                                        Entity</th>
                                </tr>
                            </thead>
                        </table>
                    </button>
                </h2>
                <div id="collapseHeader" class="accordion-collapse collapse" aria-labelledby="headingHeader"
                    data-bs-parent="#headerAccordion">
                    <!-- يمكنك إضافة محتوى إضافي هنا إذا لزم الأمر -->
                </div>
            </div>
        </div>
    </div>




    <div class="container">
        <!-- The red line!! -->
        <div class="red-line"></div>
    </div>



    <!-- Accordion Menu -->
    <div class="container">
        <div class="row g-4">
            <!-- سيتم وضع كل عنصر أكورديون داخل col-12, max size for col is 12 -->
            <div class="col-12">
                <div class="accordion" id="regulationAccordion">
                    <!-- Accordion Item 1 -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed custom-acc-btn" type="button"
                                data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false"
                                aria-controls="collapseOne">
                                <table class="w-100">
                                    <thead class="text-center">
                                        <tr>
                                            <th class="custom-col field-padding">
                                                <input type="checkbox" />
                                            </th>
                                            <th class="custom-col field-padding">
                                                1
                                            </th>
                                            <th
                                                class="col-3 d-table-cell d-sm-table-cell Regulation-Manual-size field-padding">
                                                Guide to
                                                and procedures for
                                                recruiting...</th>
                                            <th class="col-1 d-none d-md-table-cell field-padding">
                                                Students</th>
                                            <th class="col-2 d-none d-md-table-cell field-padding">
                                                8.3.4
                                            </th>
                                            <th class="col-2 d-none d-md-table-cell field-padding">
                                                2025/7/4</th>
                                            <th class="col-3 d-none d-lg-table-cell field-padding">IAU
                                                Academic
                                                affairs</th>
                                        </tr>
                                    </thead>
                                </table>
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                            data-bs-parent="#regulationAccordion">
                            <!-- content of accordion -->
                            <div class="accordion-body">
                                <form>
                                    <div class="row mb-2">
                                        <!-- left side of the accordion menu inside -->
                                        <div class="col-lg-6 col-12 mb-3 mb-lg-0">
                                            <div class="table-responsive">
                                                <table class="table table-borderless mb-0">
                                                    <tr>
                                                        <td colspan="3">
                                                            <label class="form-label fw-bold">Regulation/ Manual
                                                                name</label>
                                                            <textarea class="form-control" rows="2"
                                                                readonly>Guide to policies and procedures for recruiting, retaining, terminating, and renewing contracts for non-Saudi faculty members</textarea>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="3">
                                                            <label class="form-label fw-bold">Brief
                                                                Description</label>
                                                            <textarea class="form-control" rows="4"
                                                                readonly>All students are expected to follow the examination rules strictly. Candidates must arrive on time, carry valid identification, and bring only approved materials. Electronic devices are not allowed. Silence must be maintained throughout the exam. Any form of cheating or misconduct will result in disciplinary action. Students may not leave the exam hall without permission and must submit all materials before exiting.</textarea>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="col-12 col-sm-4">
                                                            <label class="form-label fw-bold">Approving
                                                                Date</label>
                                                            <input type="date" class="form-control mb-2"
                                                                value="2025-07-07" readonly>
                                                        </td>
                                                        <td class="col-12 col-sm-4">
                                                            <label class="form-label fw-bold">Accreditation
                                                                Date</label>
                                                            <input type="date" class="form-control mb-2"
                                                                value="2025-07-07" readonly>
                                                        </td>

                                                    </tr>
                                                    <tr>
                                                        <td colspan="2">
                                                            <label class="form-label fw-bold">Version
                                                                Number</label>
                                                            <input type="text" class="form-control mb-2" value="10.2.4"
                                                                readonly>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2">
                                                            <label class="form-label fw-bold">Accrediting
                                                                Entity</label>
                                                            <input type="text" class="form-control"
                                                                value="IAU Academic affairs" readonly>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2">
                                                            <label class="fw-bold">Responsible
                                                                Department</label>
                                                            <input type="text" class="form-control"
                                                                value="Deanship of Admission and Registration" readonly>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2">
                                                            <label class="form-label fw-bold">Note</label>
                                                            <input type="text" class="form-control mb-2"
                                                                value="this rules came from minstry of education"
                                                                readonly>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>

                                        <!-- right side of the accordion menu insde-->
                                        <div class="col-lg-6 col-12">
                                            <div class="table-responsive">
                                                <table class="table table-borderless mb-0">
                                                    <tr>
                                                        <td>
                                                            <label class="form-label fw-bold">Document
                                                                Type</label>
                                                            <select class="form-select mb-2">
                                                                <option selected>Regulation</option>
                                                                <option>Guidelines</option>
                                                                <option>Policies</option>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <label class="form-label fw-bold">Section</label>
                                                            <select class="form-select mb-2">
                                                                <option selected>Student</option>
                                                                <option>Members</option>
                                                                <option>Enrolled Program</option>
                                                            </select>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td>
                                                            <label class="form-label fw-bold">Attach word
                                                                file</label>
                                                            <div class="input-group mb-2">
                                                                <input type="text" class="form-control"
                                                                    value="Word file" readonly>
                                                                <span class="input-group-text">
                                                                    <i class="bi bi-paperclip">
                                                                        <img src="~/svgs/admin/upload-file.svg"
                                                                            alt="upload-file" />
                                                                    </i>
                                                                </span>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <label class="form-label fw-bold">Attach PDF
                                                                file</label>
                                                            <div class="input-group mb-2">
                                                                <input type="text" class="form-control"
                                                                    value="PDF file..." readonly>
                                                                <span class="input-group-text">
                                                                    <i class="bi bi-paperclip">
                                                                        <img src="~/svgs/admin/upload-file.svg"
                                                                            alt="upload-file" />
                                                                    </i></span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2">
                                                            <label class="form-label fw-bold">Responsible
                                                                entity’s
                                                                contact
                                                                information:</label>
                                                            <div class="mb-3">
                                                                <label class="form-label mb-0">Name
                                                                    (English)</label>
                                                                <input type="text" class="form-control"
                                                                    value="Azzam Alzahrani" readonly>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label class="form-label mb-0">Name
                                                                    (Arabic)</label>
                                                                <input type="text" class="form-control"
                                                                    value="عزام الزهراني" readonly>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label class="form-label mb-0">E-mail</label>
                                                                <input type="email" class="form-control"
                                                                    value="Azzam@gmail.com" readonly>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label class="form-label mb-0">Telephone
                                                                    number</label>
                                                                <input type="text" class="form-control"
                                                                    value="3333139-013" readonly>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label class="form-label mb-0">Mobile
                                                                    number</label>
                                                                <input type="text" class="form-control"
                                                                    value="0569877695" readonly>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- الأزرار -->
                                    <div class="row mt-3">
                                        <div class="col-12">
                                            <div class="d-flex flex-wrap justify-content-end gap-2">
                                                <button class="btn btn-danger">Delete</button>
                                                <button class="btn btn-secondary">Edit</button>
                                                <button class="btn btn-success">Save</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accordion Item 2 -->
            <div class="col-12">
                <div class="accordion" id="regulationAccordion2">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed custom-acc-btn" type="button"
                                data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false"
                                aria-controls="collapseTwo">
                                <table class="w-100">
                                    <thead class="text-center">
                                        <tr>
                                            <th class="custom-col field-padding">
                                                <input type="checkbox" />
                                            </th>
                                            <th class="col-1 custom-col field-padding">
                                                2
                                            </th>
                                            <th
                                                class="col-3 d-table-cell d-sm-table-cell Regulation-Manual-size field-padding">
                                                Another
                                                guide...</th>
                                            <th class="col-1 d-none d-md-table-cell field-padding">
                                                Faculty
                                            </th>
                                            <th class="col-2 d-none d-md-table-cell field-padding">
                                                5.1.2
                                            </th>
                                            <th class="col-2 d-none d-md-table-cell field-padding">
                                                2025/6/15</th>
                                            <th class="col-3 d-none d-lg-table-cell field-padding">IAU
                                                HR
                                                Department</th>
                                        </tr>
                                    </thead>
                                </table>
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                            data-bs-parent="#regulationAccordion2">
                            <div class="accordion-body">
                                <!-- content of accordion menu as is-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accordion Item 3 -->
            <div class="col-12">
                <div class="accordion" id="regulationAccordion3">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed custom-acc-btn" type="button"
                                data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false"
                                aria-controls="collapseThree">
                                <table class="w-100">
                                    <thead class="text-center">
                                        <tr>
                                            <th class="custom-col field-padding">
                                                <input type="checkbox" />
                                            </th>
                                            <th class="custom-col field-padding">
                                                3
                                            </th>
                                            <th
                                                class="col-3 d-table-cell d-sm-table-cell Regulation-Manual-size field-padding">
                                                Research
                                                policies...</th>
                                            <th class="col-1 d-none d-md-table-cell field-padding">
                                                Researchers</th>
                                            <th class="col-2 d-none d-md-table-cell field-padding">
                                                7.2.1
                                            </th>
                                            <th class="col-2 d-none d-md-table-cell field-padding">
                                                2025/5/20</th>
                                            <th class="col-3 d-none d-lg-table-cell field-padding">IAU
                                                Research
                                                Center</th>
                                        </tr>
                                    </thead>
                                </table>
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                            data-bs-parent="#regulationAccordion3">
                            <div class="accordion-body">
                                <!-- content of accordion menu as is-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>